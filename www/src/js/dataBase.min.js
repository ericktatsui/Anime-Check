(function(){var n=function(){var n,t=function(){n=this;this.db=null;this.dbEvent=new Event("dbReady")};return t.prototype.onReady=function(){},t.prototype.initialize=function(t){window.Cordova!=undefined?document.addEventListener("deviceready",function(){n.db=window.sqlitePlugin.openDatabase({name:"animecheck.db"});typeof t=="function"&&t();n.modifications(function(){n.createTables(function(){n.initializeData(function(){document.dispatchEvent(n.dbEvent)})})})},!1):(n.db=window.openDatabase("animecheck","1.0","animecheck",2097152),typeof t=="function"&&t(),n.modifications(function(){n.createTables(function(){n.initializeData(function(){document.dispatchEvent(n.dbEvent)})})}))},t.prototype.resToArray=function(n){for(var i=[],t=0;t<n.length;t++)window.Cordova!=undefined?i.push(n.item(t)):i.push(n[t]);return i},t.prototype.query=function(t,i){n.db.transaction(function(r){r.executeSql(t,[],function(t,r){typeof i=="function"&&i(n.resToArray(r.rows),r.rowsAffected)})})},t.prototype.debug=function(t){n.query(t,function(n){console.log(n)})},t.prototype.executeBatch=function(t,i){for(var u=1,r=0;r<t.length;r++)n.query(t[r],function(){u++;u==t.length&&typeof i=="function"&&i()})},t.prototype.dropTables=function(){var t=[];t.push("DROP TABLE AC_INFO");t.push("DROP TABLE AC_USER");t.push("DROP TABLE AC_SERIE_CACHE");t.push("DROP TABLE AC_SERIE");t.push("DROP TABLE AC_LIST");t.push("DROP TABLE AC_SERIE_LIST");n.executeBatch(t)},t.prototype.modifications=function(n){n()},t.prototype.createTables=function(t){var i=[],r="CREATE TABLE IF NOT EXISTS ";i.push(r+"AC_INFO ( APP_VERSION text, APP_DT_INSTALL text, DEVICE_UUID text, DEVICE_MODEL text, DEVICE_PLATFORM text, DEVICE_VERSION text )");i.push(r+"AC_USER ( USER_ID integer primary key autoincrement, USER_NAME text, USER_EMAIL text, USER_PASSWORD text, USER_PHOTO text, USER_DTEDITION text )");i.push(r+"AC_SERIE_CACHE ( CACHE_ID integer, CACHE_TYPE text, CACHE_TITLE text, CACHE_TITLE_JP text, CACHE_IMG text, CACHE_SCORE real, CACHE_STATUS text, CACHE_DTEND text, CACHE_DTSTART text, CACHE_YOUTUBEID text, CACHE_GENRES text, CACHE_DURATION text, CACHE_EPISODES text, CACHE_CHAPTERS text, CACHE_VOLUMES text, CACHE_SYNONYMS text, CACHE_DTEDITION )");i.push(r+"AC_SERIE ( SERIE_ID integer primary key autoincrement, SERIE_EXT_ID integer, SERIE_TYPE text, SERIE_SEASON integer, SERIE_NUM integer, SERIE_DTEDITION text )");i.push(r+"AC_LIST ( LIST_ID integer primary key autoincrement, LIST_NAME text, LIST_DTEDITION text )");i.push(r+"AC_SERIE_LIST ( SL_ID integer primary key autoincrement, SL_SERIE_ID integer, SL_LIST_ID integer, SL_TYPE, SL_DTEDITION text )");n.executeBatch(i,t)},t.prototype.initializeData=function(t){var i=[],r="INSERT INTO ";n.query('SELECT COUNT(*) AS "count" FROM AC_INFO',function(u){u[0].count==0?(i.push(r+"AC_INFO (APP_VERSION, APP_DT_INSTALL, DEVICE_UUID, DEVICE_MODEL, DEVICE_PLATFORM, DEVICE_VERSION) VALUES ('0.1.5', '"+moment().format()+"', '"+device.uuid+"', '"+device.model+"', '"+device.platform+"', '"+device.version+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Assistindo', '"+moment().format()+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Para Assistir', '"+moment().format()+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Animes Finalizados', '"+moment().format()+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Animes Dropados', '"+moment().format()+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Lendo', '"+moment().format()+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Para Ler', '"+moment().format()+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Mangás Finalizados', '"+moment().format()+"')"),i.push(r+"AC_LIST (LIST_NAME, LIST_DTEDITION) VALUES ('Mangás Dropados', '"+moment().format()+"')"),n.executeBatch(i,t)):typeof t=="function"&&(t(),n.update("AC_INFO","",{APP_VERSION:"0.1.5"}))})},t.prototype.mountInsert=function(n,t){var f="INSERT INTO "+n,u="",r="";for(var i in t)t[i]!=null&&t[i]!=undefined&&(u+=i+", ",typeof t[i]=="string"?r+="'"+t[i]+"', ":typeof t[i]=="number"&&(r+=t[i]+", "));return u=u.substr(0,u.length-2),r=r.substr(0,r.length-2),f+(" ("+u+") VALUES ("+r+")")},t.prototype.mountUpdate=function(n,t,i){var f="UPDATE "+n+" SET ",r="";for(var u in i)i[u]!=null&&i[u]!=undefined&&(r+=u+" = ",typeof i[u]=="string"?r+="'"+i[u]+"', ":typeof i[u]=="number"&&(r+=i[u]+", "));return r=r.substr(0,r.length-2),f+=r,t!=undefined&&t!=""&&t!=null&&t!=!1&&(f+=" WHERE "+t),f},t.prototype.insert=function(t,i,r){var u=n.mountInsert(t,i);n.query(u,r)},t.prototype.update=function(t,i,r,u){var f=n.mountUpdate(t,i,r);n.query(f,u)},t.prototype.remove=function(t,i,r){var u="DELETE FROM "+t;i!=undefined&&i!=""&&i!=null&&i!=!1&&(u+=" WHERE "+i);n.query(u,r)},t.prototype.delete=t.prototype.remove,new t};AC.Db=new n})();
//# sourceMappingURL=dataBase.min.js.map
